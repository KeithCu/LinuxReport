<!doctype html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="{{favicon}}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content = "{{description}}">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{title}}</title>
    <!-- Load Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto:wght@400;500&family=Open+Sans:wght@400;600&family=Source+Sans+Pro:wght@400;600&family=Ubuntu:wght@400;500&family=Noto+Sans:wght@400;500&family=Lato:wght@400;700&family=Raleway:wght@400;500&display=swap" rel="stylesheet">
    <!-- Link external CSS -->
    <link rel="stylesheet" href="/static/linuxreport.css?v={{ static_file_hash('linuxreport.css') }}">
  </head>
  <body>

<center>
  <div style="border: 1px solid var(--btn-border); padding: 5px; margin: 5px; display: inline-flex; align-items: center; font-size: small; position: relative;">
    <a href="https://openweathermap.org" target="_blank" style="text-decoration: none; color: inherit;">
      <center>{{ weather_html }}</center>
      <div style="position: absolute; bottom: 0; right: 0; font-size: 8px; color: var(--link);">Data by OpenWeather</div>
    </a>
  </div>
</center>
  
  <center>
    <div style="border: 2px solid var(--btn-border); padding: 5px; margin: 5px; display: inline-flex; align-items: center; font-size: large;">
      <div class="{% if g.is_mobile %}nav-links-mobile{% else %}nav-links-desktop{% endif %}">
        <a href="https://linuxreport.net" target="_blank" style="margin: 2px; color: inherit;">Linux</a>
        <a href="https://covidreport.org" target="_blank" style="margin: 2px; color: inherit;">Covid</a>
        <a href="https://aireport.keithcu.com" target="_blank" style="margin: 2px; color: inherit;">AI</a>
        <a href="https://trumpreport.info" target="_blank" style="margin: 2px; color: inherit;">Truth</a>
        <a href="https://spaceelevatorwiki.com" target="_blank" style="margin: 2px; color: inherit;">Space-Soon</a>
        <a href="https://keithcu.com/wordpress/?page_id=407/" target="_blank" style="margin: 2px; color: inherit;">Me</a>
      </div>
      <select id="theme-select" onchange="setTheme(this.value)" style="margin-left:20px; padding:5px;">
        <option value="light" style="background:#ffffff;color:#000;">Light</option>
        <option value="paper" style="background:#f5f5f5;color:#333;">Paper</option>
        <option value="silver" style="background:#C0C0C0;color:#000;">Silver</option>
        <option value="retro" style="background:#000080;color:#90ee90;">Retro</option>
        <option value="dark" style="background:#1e1e1e;color:#d4d4d4;">Dark</option>
        <option value="monokai" style="background:#272822;color:#e2e8f0;">Monokai</option>
        <option value="futuristic" style="background:#0f0f0f;color:#7fbfbf;">Futuristic</option>
        <option value="cyberpunk" style="background:#1e001f;color:#c080c0;">Cyberpunk</option>
        <option value="midnight" style="background:#0f172a;color:#cbd5e1;">Midnight</option>
        <option value="ocean" style="background:#0a192f;color:#cbd5e1;">Ocean</option>
        <option value="nord" style="background:#2e3440;color:#d8dee9;">Nord</option>
        <option value="forest" style="background:#2E4A2E;color:#E0EBD8;">Forest</option>
        <option value="steampunk" style="background:#2b1b0e;color:#d5c1a1;">Steampunk</option>
        <option value="autumn" style="background:#2c1810;color:#f5deb3;">Autumn</option>
        <option value="sepia" style="background:#704214;color:#FFF8E7;">Sepia</option>
        <option value="solarized" style="background:#fdf6e3;color:#657b83;">Solarized</option>
        <option value="pastelle" style="background:#FFEFD5;color:#4B3621;">Pastelle</option>
      </select>
      <select id="font-select" onchange="setFont(this.value)" style="margin-left:20px; padding:5px;">
        <option value="system">System Default</option>
        <option value="monospace">Monospace</option>
        <option value="inter">Inter</option>
        <option value="roboto">Roboto</option>
        <option value="open-sans">Open Sans</option>
        <option value="source-sans">Source Sans</option>
        <option value="noto-sans">Noto Sans</option>
        <option value="lato">Lato</option>
        <option value="raleway">Raleway</option>
      </select>
      <button id="chat-toggle-btn">Chat</button>
      <button type="save" name="save" onclick="redirect()" style="margin-left: 20px;">Config...</button>
    </div>
  </center>

    <center>{{ above_html }}</center>
      <!-- Enhanced Old Headlines Section -->
      <div style="text-align: center; margin: 30px 0;">
        <a href="/old_headlines" id="old-headlines-link" style="display: inline-block; padding: 15px 30px; font-size: 1.2em; text-decoration: none; color: var(--text); background: var(--btn-bg); border: 2px solid var(--btn-border); border-radius: 8px; transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <span style="font-weight: bold;">ðŸ“° Old Headlines Archive</span>
          <br>
          <small style="opacity: 0.8;">See the big stories you missed</small>
        </a>
      </div>
    
    <center><img src="{{logo_url}}" alt = "{{ title }}" style="max-height:250px;"></center>
    <center><small>{{ welcome_html }}</small></center>

    <div class="row {% if g.is_mobile %}mobile-view{% else %}desktop-view{% endif %}">
      <div class="column">{{ columns[0] }}</div>
      {%- if not g.is_mobile %}
      <div class="column">{{ columns[1] }}</div>
      <div class="column">{{ columns[2] }}</div>
      {%- endif %}
    </div>

    <!-- Chat Window HTML -->
    <div id="chat-container">
      <div id="chat-header">
        <span>Visitor Chat</span>
        <button id="chat-close-btn" title="Close Chat">&times;</button>
      </div>
      <div id="chat-messages">
        <!-- Messages will be loaded here -->
        <div id="chat-loading" style="text-align: center; padding: 10px;">Loading messages...</div>
      </div>
      <div id="chat-input-area">
         <div style="display: flex; flex-direction: column; flex-grow: 1;">
             <textarea id="chat-message-input" placeholder="Type your message (use <b>text</b> for bold)" rows="2"></textarea>
             <input type="text" id="chat-image-url-input" placeholder="Optional: Image URL or base64">
         </div>
        <button id="chat-send-btn">Send</button>
      </div>
    </div>
    <!-- Link external JS at end of body -->
    <script src="/static/linuxreport.js?v={{ static_file_hash('linuxreport.js') }}"></script>
  </body>
</html>
